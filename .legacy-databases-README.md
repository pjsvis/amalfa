# Legacy Database Files

**Purpose:** Documents old database files in project root that contain deprecated FTS infrastructure.

---

## Files

### `canary-persistence.db` (3.8 MB)

**Status:** Pre-Migration v5 test database
**Contains:** 
- FTS5 tables (`nodes_fts`, `nodes_fts_*`)
- Old schema with `content` column

**Tables:**
- `edges` (107 rows)
- `nodes` (264 rows)
- `nodes_fts` + 5 support tables (FTS infrastructure)

**Keep or delete?**
- **Delete if:** Not needed for testing/reference
- **Keep if:** Want to test migrations or compare pre/post FTS removal

**To inspect:**
```bash
bun run inspect-db canary-persistence.db
```

**To remove:**
```bash
rm canary-persistence.db canary-persistence.db-shm canary-persistence.db-wal
```

---

### `bento_ledger.sqlite` (Removed)

**Status:** ❌ Deprecated (January 2026)
**Reason:** Bento Boxing chunking system was not used in vector search pipeline

**What it was:**
- Content deduplication ledger for "Bento Boxing" (markdown chunking)
- Mapped content hashes to stable Locus IDs
- 343 entries at time of removal

**Why removed:**
- Code existed but was never integrated into vector search
- Whole-document embeddings achieved 85% accuracy without chunking
- Unnecessary complexity (most docs <3KB, already chunk-sized)
- Orphaned CLI tool, not used in production

**See:** `docs/BENTO_BOXING_DEPRECATION.md` for full rationale

---

## Current Database (Post-Migration v5)

**File:** `public/resonance.db` (2.23 MB)
**Status:** ✅ Current, production-ready
**Schema:** Clean (no FTS, no content column)

**Tables:**
- `edges` (499 rows)
- `nodes` (489 rows)

**No FTS tables** - Uses vector search (85% accuracy) + grep for search.

---

## Recommendation

**Delete legacy databases** if not needed:
```bash
# After verifying you don't need them
rm canary-persistence.db canary-persistence.db-* bento_ledger.sqlite bento_ledger.sqlite-*
```

These are **untracked by git** (per `.gitignore`) so they won't be committed.

---

**Last updated:** 2026-01-05

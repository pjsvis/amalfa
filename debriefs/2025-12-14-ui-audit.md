# Debrief: UI & Accessibility Audit

**Date:** 2025-12-14
**Objective:** Verify Frontend State, Accessibility, and Logic.

## 1. Repairs Executed
1.  **UI Crash Prevention:** Implemented a Mock Response for `/api/health` in `scripts/cli/dev.ts`. (Prevents Alpine `health` null crash).
2.  **Accessibility (ARIA):** Added `aria-label` to:
    -   Search Input (`"Search nodes"`)
    -   Left/Right Panel Toggles
    -   Close Buttons
    -   Clear Selection Button
    -   Navigation (`aria-current="page"`)

## 2. Suspected Issues (The "Mess")
The Logic Audit reveals fragility in how the graph is managed.

### A. The "Jarring" State Reset
*   **Observation:** Clicking a "Sub-Graph" filter (e.g., toggling Playbooks) triggers a complete destruction and reconstruction of the graph (`constructGraph` -> `graph.clear()`).
*   **Impact:** The camera zooms out, the layout restarts (nodes fly around), and the user loses their visual context.
*   **Root Cause:** `src/js/components/sigma-explorer/graph.js` line 12.
*   **Better Way:** Use Graphology's `dropNode` / `addNode` differentially, or use Sigma's `setNodeAttribute(..., "hidden", true)` to hide nodes without destroying the topology.

### B. The Search UX
*   **Observation:** The Search Input is located at the very bottom of the Left Panel interactions list.
*   **Impact:** On small screens (or even standard desktops), it requires scrolling to find.
*   **Recommendation:** Move Search to the top of the panel (Phase 2).

### C. The Missing Bridge
*   **Status:** User interactions (Clicking) work, but there is no "Semantic Link" (Ghost Graph) capability yet.
*   **Next Step:** The "Ghost Graph" (Phase 2.2) implementation is the natural place to refactor the State Management from "Destructive" to "Differential".

## 3. Summary
The UI is safe (no crashes) and accessible (ARIA tags), but the User Experience is brittle due to naive state management.

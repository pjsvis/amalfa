<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolyVis | Layout Test</title>
    <!-- Alpine.js -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    
    <style>
        /* DESIGN SYSTEM TOKENS (Terminal Brutalist) */
        :root {
            --ansi-black: #0C0C0C;
            --ansi-white: #CCCCCC;
            --ansi-bright-white: #FFFFFF;
            --ansi-red: #CD0000;
            --ansi-green: #00CD00;
            --ansi-cyan: #00CDCD;
            --font-mono: 'Courier New', Courier, monospace;
            --border-thick: 2px solid var(--ansi-bright-white);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--ansi-black);
            color: var(--ansi-white);
            font-family: var(--font-mono);
            
            /* CORE LAYOUT: Viewport Lock */
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        /* TYPOGRAPHY & UTILS */
        h1, h2, h3, p { margin: 0; }
        
        .btn-toggle {
            background: var(--ansi-black);
            color: var(--ansi-white);
            border: 2px solid var(--ansi-white);
            padding: 4px 12px;
            font-family: var(--font-mono);
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
            font-size: 12px;
        }
        .btn-toggle:hover {
            background: var(--ansi-white);
            color: var(--ansi-black);
        }
        .btn-toggle.active {
            background: var(--ansi-white);
            color: var(--ansi-black);
        }

        /* SLAB 1: HEADER */
        .slab-header {
            height: 60px;
            border-bottom: var(--border-thick);
            flex-shrink: 0;
            
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
        }
        .brand {
            font-weight: bold;
            font-size: 20px;
            color: var(--ansi-cyan);
            letter-spacing: -1px;
        }

        /* SLAB 2: MAIN STAGE */
        .slab-stage {
            flex-grow: 1;
            /* CRITICAL: min-height 0 prevents flex overflow bugs */
            min-height: 0;
            
            display: grid;
            /* Grid definition handled dynamically in Alpine, defaulting here */
            grid-template-columns: 250px 1fr 350px; 
            overflow: hidden;
        }

        .panel-left {
            grid-column: 1;
            border-right: var(--border-thick);
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.05);
        }

        .stage-canvas {
            grid-column: 2;
            /* No border radius, thick borders if needed, but panels have borders */
            overflow: hidden; /* For Sigma.js usually */
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            
            /* Background pattern for visual check */
            background-image: radial-gradient(var(--ansi-white) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.8;
        }

        .panel-right {
            grid-column: 3;
            border-left: var(--border-thick);
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.05);
        }

        .content-pad {
            padding: 16px;
        }

        /* SLAB 3: FOOTER */
        .slab-footer {
            height: 40px;
            border-top: var(--border-thick);
            flex-shrink: 0;
            
            display: flex;
            align-items: center;
            padding: 0 16px;
            font-size: 12px;
            opacity: 0.7;
        }
    </style>
</head>
<body x-data="{ 
    showLeft: true, 
    showRight: true,
    get gridStyle() {
        return `grid-template-columns: ${this.showLeft ? '250px' : '0px'} 1fr ${this.showRight ? '350px' : '0px'};`
    }
}">

    <!-- SLAB 1: HEADER -->
    <header class="slab-header">
        <div style="display: flex; gap: 16px; align-items: center;">
            <div class="brand">POLYVIS</div>
            <button class="btn-toggle" @click="showLeft = !showLeft" :class="{ 'active': showLeft }">Left Panel</button>
        </div>
        
        <div style="font-size: 14px; font-weight: bold;">LAYOUT PROTOTYPE</div>
        
        <button class="btn-toggle" @click="showRight = !showRight" :class="{ 'active': showRight }">Right Panel</button>
    </header>

    <!-- SLAB 2: MAIN STAGE -->
    <main class="slab-stage" :style="gridStyle">
        
        <!-- LEFT PANEL -->
        <aside class="panel-left" x-show="showLeft" style="display: block;">
            <div class="content-pad">
                <h3>LEFT PANEL</h3>
                <p style="margin-top: 1em; opacity: 0.6; font-size: 0.9em;">Width: 250px</p>
                <hr style="border: 0; border-top: 1px solid var(--ansi-white); margin: 16px 0;">
                
                <!-- Infinite scroll / content sim -->
                <template x-for="i in 20">
                    <p style="margin-bottom: 12px; font-size: 12px; line-height: 1.4;">
                        <span style="color: var(--ansi-cyan); font-weight: bold;">[LOG]</span> 
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Process <span x-text="i"></span> initialized. 
                    </p>
                </template>
            </div>
        </aside>

        <!-- CANVAS -->
        <section class="stage-canvas">
            <div style="text-align: center; background: var(--ansi-black); padding: 20px; border: 2px solid var(--ansi-white);">
                <h2 style="font-size: 24px;">MAIN CANVAS</h2>
                <div style="margin-top: 8px; color: var(--ansi-cyan);">100% Flex Fill</div>
            </div>
        </section>

        <!-- RIGHT PANEL -->
        <aside class="panel-right" x-show="showRight" style="display: block;">
            <div class="content-pad">
                <h3>RIGHT PANEL</h3>
                <p style="margin-top: 1em; opacity: 0.6; font-size: 0.9em;">Width: 350px</p>
                <hr style="border: 0; border-top: 1px solid var(--ansi-white); margin: 16px 0;">
                
                <template x-for="i in 15">
                    <div style="margin-bottom: 24px;">
                        <div style="font-weight: bold; margin-bottom: 4px; text-decoration: underline;">SEC. <span x-text="i"></span></div>
                        <p style="font-size: 12px; line-height: 1.5;">
                            Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                        </p>
                    </div>
                </template>
            </div>
        </aside>

    </main>

    <!-- SLAB 3: FOOTER -->
    <footer class="slab-footer">
        <div style="flex-grow: 1;">READY.</div>
        <div>viewport: 100vh locked</div>
    </footer>

</body>
</html>
